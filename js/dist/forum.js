(()=>{var t={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return t.d(n,{a:n}),n},d:(o,n)=>{for(var e in n)t.o(n,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o),flarum.core.compat.extend;const n=flarum.core.compat["forum/app"];var e=t.n(n);const r=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/HeaderSecondary"];var a=t.n(i);function s(t,o){return s=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},s(t,o)}function c(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,s(t,o)}const u=flarum.core.compat["common/components/NotificationsDropdown"];var l=t.n(u);const p=flarum.core.compat["common/Component"];var f=t.n(p);const d=flarum.core.compat["common/components/LoadingIndicator"];var h=t.n(d);flarum.core.compat["common/components/Button"],flarum.core.compat["common/components/Tooltip"];const v=flarum.core.compat["common/helpers/humanTime"];var y=t.n(v);flarum.core.compat["common/helpers/avatar"];var g=function(t){function o(){return t.apply(this,arguments)||this}c(o,t);var n=o.prototype;return n.oncreate=function(o){t.prototype.oninit.call(this,o),this.state=this.attrs.state},n.view=function(){if(this.state){var t=this.state.cache||[];return m("div",{className:"NotificationList"},m("div",{className:"NotificationList-header"},m("h4",{className:"App-titleControl App-titleControl--text"},e().translator.trans("ziven-view-history.forum.view-history"))),m("div",{className:"NotificationList-content"},m("ul",{className:"NotificationGroup-content"},t.length?t.map((function(t){return console.log(t.user()),m("div",null,y()(t.attributes.assigned_at))})):this.state.loading?h().component({className:"LoadingIndicator--block"}):m("div",{className:"NotificationList-empty"},e().translator.trans("ziven-view-history.forum.is-empty")))))}},o}(f()),w=function(t){function o(){return t.apply(this,arguments)||this}c(o,t),o.initAttrs=function(o){o.label=app.translator.trans("ziven-view-history.forum.view-history"),o.icon="fas fa-history",t.initAttrs.call(this,o)};var n=o.prototype;return n.getMenu=function(){return m("div",{className:"Dropdown-menu "+this.attrs.menuClassName,onclick:this.menuClick.bind(this)},this.showing?g.component({state:this.attrs.state}):"")},n.goToRoute=function(){m.route.set(app.route("viewHisotry"))},n.getUnreadCount=function(){return 0},n.getNewCount=function(){return this.getUnreadCount()},o}(l()),b=function(){function t(t){this.app=t,this.loading=!1,this.cache=[]}return t.prototype.load=function(){var t=this;this.loading=!0,m.redraw(),this.app.store.find("viewHistory").then((function(o){t.cache=o.payload.data})).catch((function(){})).then((function(){t.loading=!1,m.redraw()}))},t}();const N=flarum.core.compat["common/Model"];var O=t.n(N);const _=flarum.core.compat["common/models/Discussion"];var C=t.n(_);const H=flarum.core.compat["common/models/User"];var j=t.n(H),A=function(t){function o(){return t.apply(this,arguments)||this}c(o,t);var n=o.prototype;return n.type=function(){return O().attribute<string>"type".call(this)},n.createdAt=function(){return O().attribute("createdAt",O().transformDate).call(this)},n.discussion=function(){return O().hasOne<C()>"discussion".call(this)},n.user=function(){return O().hasOne<j()|null>"user".call(this)},n.id=function(){console.log("eeeee")},o}(O());e().initializers.add("ziven-view-history",(function(){e().store.models.viewHistory=A,e().viewHistory=new b(e()),(0,r.extend)(a().prototype,"items",(function(t){e().session.user&&t.add("viewHistory",m(w,{state:e().viewHistory}),20)}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map